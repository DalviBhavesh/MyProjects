<!DOCTYPE html>
<html th:replace="~{normal/base::layout(~{::section})}">
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<section class="banner">
		
		<div class="container">
		 	<div class="row">
				 <div class="col-sm-6 offset-sm-3">
					 
					 <div class="my-card">
						 
						  
						 <!-- using Session to get error message from controller -->
						 <div th:if="${session.message}" 
						 	  th:classappend="${session.message.type}" 
						 	  class="alert text-center" 
						 	  role="alert">
						 	  
						 <span th:text="${session.message.content}"></span>
						</div>
						 
						<!-- removing message from session after showing it to the user--> 
						<th:block th:text="${@sessionHelper.removeMessageFromSession()}"></th:block>
						 
						 
						 
						 <div class="container text-center">
							 <img id="singleCardImg" class="rounded-circle img-thumbnail object-fit-contain" th:src="@{'/img/'+${prevUser.imageUrl}}" alt="" />
						 </div>
						 
						 
						 
						 
						 <form th:action="@{/user/processUpdatedUser}" 
						 		enctype="multipart/form-data"
						 		method="post" 
						 		th:object="${prevUser}"> 
						 		
							 <!-- name field -->
							 <div class="mb-3">
								 <div class="container">
									 <label for="exampleInputEmail1" class="form-label">Change Name</label>
								 </div>
							    
							    
							    <input type="text" 
							    		class="form-control " 
							    		th:classappend="${#fields.hasErrors('name') ? 'is-invalid' : ''}"
							    		id="name-field" 
							    		aria-describedby="emailHelp"
							    		placeholder="abc"
							    		th:value="${prevUser.name}"
							    		name="name"
							    		required>
							    		
							    <div  class="invalid-feedback" th:each="e : ${#fields.errors('name')}" th:text="${e}">
							      
							    </div>
							    		
							  </div>
							  
							  
							  
							 
							  
							  
							  
							  <!-- Text Area -->
							  <div class="mb-3">
								  <div class="container">
									 <label for="exampleInputEmail1" class="form-label">Change Description</label>
								 </div>
								  <textarea class="form-control" 
								  			th:classappend="${#fields.hasErrors('about')?'is-invalid':''}"
								  			placeholder="Enter something about yourself....."  
								  			rows="3"
								  			th:text="${prevUser.about}"
								  			name="about"></textarea>
								  			
								  <div  class="invalid-feedback" th:each="e : ${#fields.errors('about')}" th:text="${e}">
							      
							      </div>
							    	
							  </div>
							  
							  
							  
							  <div>
								  <div class="container">
									 <label for="exampleInputEmail1" class="form-label">Set Profile picture</label>
								 </div>
								 <div class="input-group mb-3">
								  <span class="input-group-text" for="inputGroupFile01"><i class="fa-solid fa-image"></i></span>
								  <input name="profileImage"
								  		id="inputGroupFile01" 
								  		 type="file" 
								  		 class="form-control"
								  		 placeholder="Enter new profile photo">
								  
								</div>
								  		
							    	
							  </div>
							  
							  	
							  
							  
							  
							  <div class="container text-center mt-3 ">
								  <button type="submit" class="btn button-color">Update</button>
								  <button onclick="history.back()" type="reset" class="btn btn-danger">Cancel</button>
							  </div>
							  
							  
						 </form>
						 
					 </div>
					 
				 </div>
			 </div>
		</div>
		
		<script>
		$(document).ready(()=>{
			$(".item").removeClass("active");
			$("#userProfile-link").addClass("active");
		});
	</script>
	</section>
</body>
</html>